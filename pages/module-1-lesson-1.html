<div class="page-header">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1 class="page-title">üìñ Module 1: Options Basics</h1>
            <p class="page-subtitle">Lesson 1: What Are Options?</p>
        </div>
        <button class="btn btn-secondary" onclick="window.history.back()">‚Üê Back to Academy</button>
    </div>
</div>

<!-- Lesson Progress -->
<div class="card mb-3">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
        <span style="color: var(--text-secondary); font-size: 0.875rem;">Lesson Progress</span>
        <span style="color: var(--text-secondary); font-size: 0.875rem;">Lesson 1 of 5</span>
    </div>
    <div style="background: var(--dark-bg); border-radius: 9999px; height: 1rem; overflow: hidden; border: 1px solid var(--border-color);">
        <div style="background: linear-gradient(90deg, var(--primary), var(--accent)); height: 100%; width: 20%; transition: width 0.3s ease;"></div>
    </div>
</div>

<!-- Lesson Content -->
<div class="card" style="margin-bottom: 2rem;">
    <h2 style="font-size: 1.5rem; margin-top: 0;">What Are Options?</h2>

    <div style="margin-bottom: 2rem;">
        <p style="line-height: 1.6; color: var(--text-secondary);">
            An <strong style="color: var(--text-primary);">option</strong> is a financial contract that gives you the <strong>right, but not the obligation</strong>, to buy or sell a stock at a specific price before a certain date.
        </p>
        <p style="line-height: 1.6; color: var(--text-secondary);">
            Think of it like a coupon or ticket that locks in a price. You pay a small amount upfront (the "premium") to control a much larger position in a stock without buying the stock itself.
        </p>
    </div>

    <div style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 2rem;">
        <h3 style="font-size: 1.25rem; margin-top: 0; color: var(--primary);">üîë Key Insight</h3>
        <p style="margin: 0; line-height: 1.6;">
            Options give you <strong>leverage</strong> - the ability to control $10,000+ worth of stock for just a few hundred dollars. This amplifies both gains AND losses, making risk management critical.
        </p>
    </div>

    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Real-World Analogy</h3>

    <div style="background: var(--dark-bg); border: 1px solid var(--border-color); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 2rem;">
        <p style="line-height: 1.6; color: var(--text-secondary); margin-bottom: 1rem;">
            Imagine you find a house you want to buy for $500,000, but you're not sure yet. The seller offers you a deal:
        </p>

        <ul style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 1rem;">
            <li>Pay $5,000 today (non-refundable)</li>
            <li>You have 30 days to decide</li>
            <li>You can buy the house for $500,000 anytime in those 30 days</li>
            <li>If the price goes up to $550,000, you still only pay $500,000</li>
            <li>If you decide not to buy, you walk away (but lose the $5,000)</li>
        </ul>

        <p style="line-height: 1.6; color: var(--text-secondary); margin: 0;">
            <strong style="color: var(--text-primary);">This is exactly how a call option works!</strong> You pay a small premium for the right to buy at a locked-in price.
        </p>
    </div>

    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Options vs Stock: Key Differences</h3>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
        <div style="background: var(--dark-bg); border: 2px solid var(--success-color); border-radius: 0.5rem; padding: 1.25rem;">
            <h4 style="margin-top: 0; color: var(--success-color);">üìà Buying Stock</h4>
            <ul style="color: var(--text-secondary); line-height: 1.8; margin: 0; padding-left: 1.25rem;">
                <li>You own shares directly</li>
                <li>No expiration date</li>
                <li>1% stock move = 1% gain/loss</li>
                <li>Requires full capital</li>
                <li>Example: $10,000 for 100 shares</li>
            </ul>
        </div>

        <div style="background: var(--dark-bg); border: 2px solid var(--primary); border-radius: 0.5rem; padding: 1.25rem;">
            <h4 style="margin-top: 0; color: var(--primary);">‚ö° Buying Options</h4>
            <ul style="color: var(--text-secondary); line-height: 1.8; margin: 0; padding-left: 1.25rem;">
                <li>You control stock rights</li>
                <li>Expires on a set date</li>
                <li>1% stock move = 10-50%+ gain/loss</li>
                <li>Requires small premium</li>
                <li>Example: $200-500 for same control</li>
            </ul>
        </div>
    </div>

    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">The Four Core Components</h3>

    <p style="line-height: 1.6; color: var(--text-secondary); margin-bottom: 1rem;">
        Every options contract has these essential elements:
    </p>

    <div style="display: grid; gap: 1rem; margin-bottom: 2rem;">
        <div style="background: var(--dark-bg); border-left: 4px solid var(--primary); padding: 1rem; border-radius: 0.25rem;">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--primary);">1. Underlying Asset</h4>
            <p style="margin: 0; color: var(--text-secondary);">
                The stock you have the right to buy/sell (e.g., AAPL, TSLA, SPY)
            </p>
        </div>

        <div style="background: var(--dark-bg); border-left: 4px solid var(--accent); padding: 1rem; border-radius: 0.25rem;">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--accent);">2. Strike Price</h4>
            <p style="margin: 0; color: var(--text-secondary);">
                The locked-in price at which you can buy/sell the stock (e.g., $150 strike)
            </p>
        </div>

        <div style="background: var(--dark-bg); border-left: 4px solid var(--warning-color); padding: 1rem; border-radius: 0.25rem;">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--warning-color);">3. Expiration Date</h4>
            <p style="margin: 0; color: var(--text-secondary);">
                The last day your option is valid (measured in DTE - Days To Expiration)
            </p>
        </div>

        <div style="background: var(--dark-bg); border-left: 4px solid var(--success-color); padding: 1rem; border-radius: 0.25rem;">
            <h4 style="margin: 0 0 0.5rem 0; color: var(--success-color);">4. Premium</h4>
            <p style="margin: 0; color: var(--text-secondary);">
                The price you pay to buy the option contract (this is your maximum risk)
            </p>
        </div>
    </div>

    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Example Trade Walkthrough</h3>

    <div style="background: var(--darker-bg); border: 2px solid var(--primary); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 2rem;">
        <p style="margin-top: 0; line-height: 1.6; color: var(--text-secondary);">
            <strong style="color: var(--text-primary);">Scenario:</strong> Apple (AAPL) is trading at $150 per share. You think it's going to $160 in the next month.
        </p>

        <div style="margin: 1.5rem 0; padding: 1rem; background: rgba(99, 102, 241, 0.1); border-left: 4px solid var(--primary); border-radius: 0.25rem;">
            <strong style="color: var(--primary);">Option 1: Buy 100 shares of stock</strong>
            <ul style="color: var(--text-secondary); line-height: 1.8; margin: 0.5rem 0;">
                <li>Cost: $15,000 (100 shares √ó $150)</li>
                <li>If AAPL goes to $160: Profit = $1,000 (6.7% gain)</li>
                <li>If AAPL drops to $140: Loss = -$1,000 (6.7% loss)</li>
            </ul>
        </div>

        <div style="margin: 1.5rem 0; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-left: 4px solid var(--success-color); border-radius: 0.25rem;">
            <strong style="color: var(--success-color);">Option 2: Buy 1 call option (controls 100 shares)</strong>
            <ul style="color: var(--text-secondary); line-height: 1.8; margin: 0.5rem 0;">
                <li>Cost: $300 premium for $155 strike, 30 DTE</li>
                <li>If AAPL goes to $160: Profit = $200 (67% gain!) ‚ú®</li>
                <li>If AAPL drops to $140: Loss = -$300 (max loss is premium paid)</li>
            </ul>
        </div>

        <p style="margin-bottom: 0; line-height: 1.6; color: var(--text-muted); font-size: 0.875rem;">
            <strong>Notice:</strong> The option costs 98% less but can deliver similar absolute profits with capped downside risk (you can't lose more than the $300 premium).
        </p>
    </div>

    <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 2rem;">
        <h3 style="font-size: 1.25rem; margin-top: 0; color: var(--danger-color);">‚ö†Ô∏è Critical Risk Warning</h3>
        <p style="margin: 0; line-height: 1.6;">
            Options can expire <strong>worthless</strong>. If AAPL stays at $150 or drops, your entire $300 premium is lost. With stocks, you still own the shares and can wait for recovery. Options have a ticking clock.
        </p>
    </div>

    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Why Trade Options?</h3>

    <div style="display: grid; gap: 0.75rem; margin-bottom: 2rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <span style="font-size: 1.5rem;">üí∞</span>
            <div>
                <strong style="color: var(--text-primary);">Capital Efficiency</strong>
                <p style="margin: 0.25rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                    Control large positions with small amounts of capital
                </p>
            </div>
        </div>

        <div style="display: flex; align-items: start; gap: 1rem;">
            <span style="font-size: 1.5rem;">üõ°Ô∏è</span>
            <div>
                <strong style="color: var(--text-primary);">Defined Risk</strong>
                <p style="margin: 0.25rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                    Maximum loss is limited to premium paid (when buying options)
                </p>
            </div>
        </div>

        <div style="display: flex; align-items: start; gap: 1rem;">
            <span style="font-size: 1.5rem;">üéØ</span>
            <div>
                <strong style="color: var(--text-primary);">Leverage</strong>
                <p style="margin: 0.25rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                    Amplify returns on directional moves (10x-50x gains possible)
                </p>
            </div>
        </div>

        <div style="display: flex; align-items: start; gap: 1rem;">
            <span style="font-size: 1.5rem;">‚ö°</span>
            <div>
                <strong style="color: var(--text-primary);">Speed</strong>
                <p style="margin: 0.25rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                    Profit from short-term moves (hours to weeks) vs holding stocks for months
                </p>
            </div>
        </div>

        <div style="display: flex; align-items: start; gap: 1rem;">
            <span style="font-size: 1.5rem;">üìä</span>
            <div>
                <strong style="color: var(--text-primary);">Flexibility</strong>
                <p style="margin: 0.25rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                    Profit from stocks going up, down, or sideways with different strategies
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Knowledge Check -->
<div class="card" style="margin-bottom: 2rem; border: 2px solid var(--accent);">
    <h3 style="font-size: 1.25rem; margin-top: 0; color: var(--accent);">üí° Knowledge Check</h3>

    <div style="margin-bottom: 1rem;">
        <p style="font-weight: bold; margin-bottom: 0.5rem;">What is the maximum loss when buying an options contract?</p>
        <div style="display: grid; gap: 0.5rem;">
            <button class="btn btn-secondary btn-sm" style="text-align: left;" onclick="Module1Lesson1.checkAnswer(this, false)">
                A) Unlimited - you can lose everything
            </button>
            <button class="btn btn-secondary btn-sm" style="text-align: left;" onclick="Module1Lesson1.checkAnswer(this, true)">
                B) The premium you paid for the contract
            </button>
            <button class="btn btn-secondary btn-sm" style="text-align: left;" onclick="Module1Lesson1.checkAnswer(this, false)">
                C) The strike price of the option
            </button>
            <button class="btn btn-secondary btn-sm" style="text-align: left;" onclick="Module1Lesson1.checkAnswer(this, false)">
                D) There is no maximum loss
            </button>
        </div>
        <div id="answer-feedback" style="margin-top: 1rem; padding: 1rem; border-radius: 0.5rem; display: none;"></div>
    </div>
</div>

<!-- Lesson Navigation -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <button class="btn btn-secondary" onclick="window.history.back()">
        ‚Üê Back to Academy
    </button>
    <button class="btn btn-primary" id="next-lesson-btn" onclick="Module1Lesson1.completeLesson()">
        Complete Lesson & Continue ‚Üí
    </button>
</div>

<script>
const Module1Lesson1 = {
    answered: false,

    checkAnswer(button, isCorrect) {
        if (this.answered) return;

        this.answered = true;
        const feedback = document.getElementById('answer-feedback');
        feedback.style.display = 'block';

        // Disable all buttons
        const buttons = button.parentElement.querySelectorAll('button');
        buttons.forEach(btn => btn.disabled = true);

        if (isCorrect) {
            button.classList.remove('btn-secondary');
            button.classList.add('btn-success');
            feedback.style.background = 'rgba(16, 185, 129, 0.1)';
            feedback.style.border = '1px solid var(--success-color)';
            feedback.innerHTML = `
                <strong style="color: var(--success-color);">‚úì Correct!</strong>
                <p style="margin: 0.5rem 0 0 0; color: var(--text-secondary);">
                    When you buy an options contract, your maximum loss is limited to the premium you paid.
                    This is one of the key advantages of buying options - defined, limited risk.
                </p>
            `;
        } else {
            button.classList.remove('btn-secondary');
            button.classList.add('btn-danger');
            feedback.style.background = 'rgba(239, 68, 68, 0.1)';
            feedback.style.border = '1px solid var(--danger-color)';
            feedback.innerHTML = `
                <strong style="color: var(--danger-color);">‚úó Not quite</strong>
                <p style="margin: 0.5rem 0 0 0; color: var(--text-secondary);">
                    The correct answer is <strong>B) The premium you paid for the contract</strong>.
                    Your maximum loss is always limited to what you paid upfront when buying options.
                </p>
            `;
        }
    },

    completeLesson() {
        // Load progress
        const saved = localStorage.getItem('tradefly_learn_progress');
        let progress = saved ? JSON.parse(saved) : {
            level: 1,
            totalXP: 0,
            completedModules: [],
            completedLessons: [],
            completedQuizzes: [],
            achievements: [],
            currentModule: 'module-1',
            currentLesson: null
        };

        // Mark lesson as completed
        const lessonId = 'module-1-lesson-1';
        if (!progress.completedLessons.includes(lessonId)) {
            progress.completedLessons.push(lessonId);
            progress.totalXP += 50; // 50 XP per lesson

            // Check if this is their first lesson
            if (progress.completedLessons.length === 1) {
                progress.achievements.push({
                    icon: 'üéì',
                    name: 'First Lesson',
                    description: 'Completed your first lesson',
                    earnedAt: new Date().toISOString()
                });
            }

            // Save progress
            localStorage.setItem('tradefly_learn_progress', JSON.stringify(progress));

            // Show completion message
            alert('üéâ Lesson Complete! +50 XP\n\nNext: Lesson 2 - Calls vs Puts');
        }

        // Navigate to next lesson (will create in next step)
        alert('Lesson 2 coming in next implementation step!\n\nReturning to Academy dashboard...');
        window.history.back();
    }
};
</script>
