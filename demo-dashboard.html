<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeFly AI - Options Signals Dashboard (Demo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Design Intent Declaration
        =============================
        User type: Active options traders (retail to semi-professional)
        Primary decision: "Which signal should I trade right now?"
        Excluded on purpose:
          - Generic portfolio tracking
          - Long-term investment analysis
          - Social/community features
          - Decorative UI elements that don't aid decision-making
        Failure definition:
          - Missing a profitable signal due to unclear information hierarchy
          - Entering a bad trade because risk metrics weren't prominent
          - Unable to identify best signal in <3 seconds
        UI Mode: MODE_SAAS
          - Customer-facing product
          - Balanced density (high information, crystal clear hierarchy)
          - Strong clarity under time pressure
          - Trading workstation, not generic dashboard
        */

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .monospace {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
        }

        /* Scrolling ticker animation */
        @keyframes scroll-ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-scroll {
            animation: scroll-ticker 30s linear infinite;
        }

        .ticker-container:hover .ticker-scroll {
            animation-play-state: paused;
        }

        /* Pulse animation for live indicators */
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pulse-dot {
            animation: pulse-dot 2s ease-in-out infinite;
        }

        /* Signal card hover state */
        .signal-card {
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .signal-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #3a3a3a;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4a4a4a;
        }
    </style>
</head>
<body class="bg-[#0a0a0a] text-white min-h-screen">

    <!-- SECTION 1: Market Status Bar (Always Visible) -->
    <header class="bg-gradient-to-r from-[#1a1a1a] to-[#1f1f1f] border-b border-[#2a2a2a] sticky top-0 z-50">
        <div class="max-w-[1600px] mx-auto px-6 py-3">
            <div class="flex items-center justify-between gap-6 flex-wrap">
                <!-- Left: Brand + Market Status -->
                <div class="flex items-center gap-6">
                    <h1 class="text-xl font-bold">TradeFly AI</h1>

                    <!-- Market Status Indicator -->
                    <div class="flex items-center gap-3 bg-red-500/10 border border-red-500/30 rounded-lg px-4 py-2">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500 pulse-dot"></div>
                            <span class="font-bold text-red-400">MARKET CLOSED</span>
                        </div>
                        <div class="h-4 w-px bg-red-500/30"></div>
                        <span class="text-sm text-red-300">üåô After Hours</span>
                    </div>

                    <!-- Live Clock (ET) -->
                    <div class="text-sm text-gray-400">
                        <div class="font-mono">4:32:15 PM ET</div>
                        <div class="text-xs text-gray-500">Dec 19, 2025</div>
                    </div>
                </div>

                <!-- Right: Market Context -->
                <div class="flex items-center gap-6">
                    <!-- Market Indices -->
                    <div class="flex gap-4 text-sm">
                        <div>
                            <div class="text-gray-400 text-xs">SPY</div>
                            <div class="font-mono font-semibold text-green-400">$582.34 <span class="text-xs">+0.8%</span></div>
                        </div>
                        <div>
                            <div class="text-gray-400 text-xs">QQQ</div>
                            <div class="font-mono font-semibold text-green-400">$512.89 <span class="text-xs">+1.2%</span></div>
                        </div>
                    </div>

                    <!-- Next Open Time -->
                    <div class="text-sm bg-[#1f1f1f] border border-[#2a2a2a] rounded-lg px-4 py-2">
                        <div class="text-gray-400 text-xs">Next Open</div>
                        <div class="font-mono font-semibold">9:30 AM ET <span class="text-gray-500">in 15h 02m</span></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- SECTION 2: Top Movers Scanner -->
    <section class="bg-[#1a1a1a] border-b border-[#2a2a2a] py-4 overflow-hidden">
        <div class="max-w-[1600px] mx-auto px-6">
            <div class="flex items-center justify-between mb-2">
                <div class="flex items-center gap-3">
                    <h2 class="text-sm font-semibold text-gray-400">üìä TOP MOVERS</h2>
                    <span class="text-xs text-gray-500">Tracking 20 stocks: 7 gainers, 13 losers</span>
                </div>
                <div class="text-xs text-gray-500">Last refresh: 12s ago</div>
            </div>

            <!-- Scrolling Ticker -->
            <div class="ticker-container relative overflow-hidden">
                <div class="ticker-scroll flex gap-6 whitespace-nowrap">
                    <!-- Duplicate set for seamless loop -->
                    <div class="flex gap-6">
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">NVDA</span>
                            <span class="font-mono text-sm">$145.23</span>
                            <span class="font-bold text-green-400 text-sm">+5.2%</span>
                            <span class="text-xs text-orange-400">üî• 3.8x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">TSLA</span>
                            <span class="font-mono text-sm">$428.67</span>
                            <span class="font-bold text-green-400 text-sm">+3.8%</span>
                            <span class="text-xs text-orange-400">üî• 4.2x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-red-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">AAPL</span>
                            <span class="font-mono text-sm">$198.45</span>
                            <span class="font-bold text-red-400 text-sm">-2.1%</span>
                            <span class="text-xs text-gray-500">2.1x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">META</span>
                            <span class="font-mono text-sm">$612.34</span>
                            <span class="font-bold text-green-400 text-sm">+2.9%</span>
                            <span class="text-xs text-gray-500">1.8x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-red-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">AMZN</span>
                            <span class="font-mono text-sm">$224.56</span>
                            <span class="font-bold text-red-400 text-sm">-1.8%</span>
                            <span class="text-xs text-gray-500">1.5x vol</span>
                        </div>
                    </div>
                    <!-- Duplicate for seamless scroll -->
                    <div class="flex gap-6">
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">NVDA</span>
                            <span class="font-mono text-sm">$145.23</span>
                            <span class="font-bold text-green-400 text-sm">+5.2%</span>
                            <span class="text-xs text-orange-400">üî• 3.8x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">TSLA</span>
                            <span class="font-mono text-sm">$428.67</span>
                            <span class="font-bold text-green-400 text-sm">+3.8%</span>
                            <span class="text-xs text-orange-400">üî• 4.2x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-red-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">AAPL</span>
                            <span class="font-mono text-sm">$198.45</span>
                            <span class="font-bold text-red-400 text-sm">-2.1%</span>
                            <span class="text-xs text-gray-500">2.1x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-green-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">META</span>
                            <span class="font-mono text-sm">$612.34</span>
                            <span class="font-bold text-green-400 text-sm">+2.9%</span>
                            <span class="text-xs text-gray-500">1.8x vol</span>
                        </div>
                        <div class="bg-[#1f1f1f] border border-red-500/20 rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">AMZN</span>
                            <span class="font-mono text-sm">$224.56</span>
                            <span class="font-bold text-red-400 text-sm">-1.8%</span>
                            <span class="text-xs text-gray-500">1.5x vol</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="max-w-[1600px] mx-auto px-6 py-6">
        <div class="grid grid-cols-12 gap-6">

            <!-- SECTION 3: Signal Filters Panel (Left Sidebar) -->
            <aside class="col-span-3">
                <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg p-6 sticky top-24">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-bold flex items-center gap-2">
                            ‚ö° Signal Filters
                        </h2>
                        <button class="text-xs text-blue-400 hover:text-blue-300">Reset All</button>
                    </div>

                    <div class="space-y-6">
                        <!-- Strategy Type -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Strategy Type</label>
                            <select class="w-full bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <option>ALL Strategies</option>
                                <option>‚ö° SCALP (1-5 min holds)</option>
                                <option>üöÄ MOMENTUM (15min-2hr)</option>
                                <option>üìä VOLUME_SPIKE (smart money)</option>
                            </select>
                        </div>

                        <!-- Confidence Level -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Min Confidence</label>
                            <select class="w-full bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <option>50%+ (show all)</option>
                                <option>60%+ (good signals)</option>
                                <option selected>70%+ (strong signals)</option>
                                <option>80%+ (very strong)</option>
                                <option>90%+ (institutional-grade)</option>
                            </select>
                        </div>

                        <!-- Moneyness -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Moneyness</label>
                            <select class="w-full bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <option>ALL Options</option>
                                <option>üí∞ Deep ITM (>10% ITM)</option>
                                <option>üíµ ITM (in the money)</option>
                                <option selected>üéØ ATM (at the money)</option>
                                <option>üìâ OTM (out of the money)</option>
                                <option>üé≤ Far OTM (>10% OTM)</option>
                            </select>
                        </div>

                        <!-- Days to Expiration -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Days to Expiration</label>
                            <select class="w-full bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <option>ALL Expirations</option>
                                <option>0-3 DTE (same week)</option>
                                <option selected>4-7 DTE (weekly)</option>
                                <option>7-14 DTE</option>
                                <option>14-30 DTE (monthly)</option>
                                <option>30-60 DTE</option>
                                <option>60-90 DTE</option>
                                <option>90+ DTE (LEAPs)</option>
                            </select>
                        </div>

                        <!-- Entry Price Range -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Entry Price Range</label>
                            <div class="grid grid-cols-2 gap-2 mb-2">
                                <input type="number" placeholder="Min" value="0.01" step="0.01" class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <input type="number" placeholder="Max" value="10.00" step="0.01" class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                            </div>
                            <div class="flex gap-2 flex-wrap">
                                <button class="text-xs bg-[#0a0a0a] border border-[#2a2a2a] rounded px-2 py-1 hover:border-blue-500">Under $1</button>
                                <button class="text-xs bg-[#0a0a0a] border border-[#2a2a2a] rounded px-2 py-1 hover:border-blue-500">$1-$5</button>
                                <button class="text-xs bg-blue-500 border border-blue-500 rounded px-2 py-1">$5-$10</button>
                            </div>
                        </div>

                        <!-- Delta Range -->
                        <div>
                            <label class="text-sm font-semibold text-gray-300 mb-2 block">Delta Range</label>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" placeholder="Min" value="0.40" step="0.01" class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                                <input type="number" placeholder="Max" value="0.70" step="0.01" class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                            </div>
                            <div class="text-xs text-gray-500 mt-1">Institutional range: 0.40-0.70</div>
                        </div>

                        <!-- Action Button -->
                        <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center gap-2">
                            üîÑ Refresh Signals
                        </button>

                        <div class="text-xs text-gray-500 text-center">
                            Auto-refresh in 0:24
                        </div>
                    </div>
                </div>
            </aside>

            <!-- SECTION 4: Signals Feed (Main Content) -->
            <main class="col-span-6">
                <!-- Result Summary -->
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-2xl font-bold">Options Signals</h2>
                        <p class="text-sm text-gray-400">Found 3 signals matching your criteria</p>
                    </div>
                    <div>
                        <select class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none">
                            <option>Sort: Confidence (High ‚Üí Low)</option>
                            <option>Sort: Time (Newest First)</option>
                            <option>Sort: Price (Low ‚Üí High)</option>
                            <option>Sort: R/R Ratio (High ‚Üí Low)</option>
                        </select>
                    </div>
                </div>

                <!-- Signal Cards -->
                <div class="space-y-4">

                    <!-- SIGNAL CARD 1: High Confidence SCALP -->
                    <div class="signal-card bg-[#1a1a1a] border-2 border-purple-500/30 rounded-xl overflow-hidden">
                        <!-- Card Header -->
                        <div class="bg-gradient-to-r from-purple-900/20 to-blue-900/20 border-b border-[#2a2a2a] p-4">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-3xl font-extrabold">NVDA</h3>
                                        <span class="text-xl font-bold text-gray-300">$145 CALL</span>
                                        <span class="px-3 py-1 bg-purple-500 text-white text-sm font-bold rounded-full">85% Confidence</span>
                                        <span class="px-3 py-1 bg-blue-500/20 text-blue-300 text-xs font-semibold rounded-full border border-blue-500/30">‚ö° SCALP</span>
                                        <span class="px-2 py-1 bg-orange-500/20 text-orange-300 text-xs font-semibold rounded border border-orange-500/30">üî• HOT</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-sm text-gray-400">
                                        <span>Expires: <strong class="text-white">Dec 27, 2025</strong></span>
                                        <span>‚Ä¢</span>
                                        <span><strong class="text-yellow-400">4 DTE</strong></span>
                                        <span>‚Ä¢</span>
                                        <span class="text-xs text-gray-500">Generated 2 minutes ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Body: Price Action (CRITICAL SECTION) -->
                        <div class="p-6 bg-[#1f1f1f]">
                            <div class="grid grid-cols-3 gap-4 mb-6">
                                <!-- ENTRY -->
                                <div class="bg-blue-500/10 border-2 border-blue-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-blue-300 mb-1">ENTRY</div>
                                    <div class="text-3xl font-bold monospace text-blue-400">$3.25</div>
                                    <div class="text-xs text-gray-400 mt-1">ASK price</div>
                                </div>

                                <!-- TARGET -->
                                <div class="bg-green-500/10 border-2 border-green-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-green-300 mb-1">TARGET üéØ</div>
                                    <div class="text-3xl font-bold monospace text-green-400">$3.90</div>
                                    <div class="text-sm font-semibold text-green-400 mt-1">+20%</div>
                                </div>

                                <!-- STOP -->
                                <div class="bg-red-500/10 border-2 border-red-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-red-300 mb-1">STOP üõë</div>
                                    <div class="text-3xl font-bold monospace text-red-400">$2.60</div>
                                    <div class="text-sm font-semibold text-red-400 mt-1">-20%</div>
                                </div>
                            </div>

                            <!-- R/R Ratio -->
                            <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-3 text-center mb-6">
                                <span class="text-sm text-gray-400">Risk/Reward:</span>
                                <span class="text-xl font-bold text-green-400 ml-2">2.5:1</span>
                                <span class="text-xs text-gray-500 ml-2">(Risk $65 to make $163)</span>
                            </div>

                            <!-- Signal Reason -->
                            <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-4 mb-4">
                                <div class="text-xs font-semibold text-gray-400 mb-2">SIGNAL REASON</div>
                                <div class="text-sm font-mono text-white">
                                    <strong class="text-blue-400">SCALP:</strong>
                                    <strong class="text-green-400">3.2% momentum</strong> +
                                    RSI <strong class="text-yellow-400">35 oversold</strong> +
                                    Volume <strong class="text-orange-400">1,250 contracts</strong>
                                    (<strong class="text-orange-400">3.2x avg</strong>)
                                </div>
                            </div>

                            <!-- Expandable Details -->
                            <details class="group">
                                <summary class="cursor-pointer text-sm font-semibold text-blue-400 hover:text-blue-300 mb-2">
                                    Show Full Details ‚ñº
                                </summary>

                                <div class="grid grid-cols-2 gap-4 mt-4">
                                    <!-- Contract Details -->
                                    <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-3">
                                        <div class="text-xs font-semibold text-gray-400 mb-2">CONTRACT DETAILS</div>
                                        <div class="space-y-1 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Underlying:</span>
                                                <span class="font-mono font-semibold">$145.23</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Strike:</span>
                                                <span class="font-mono font-semibold">$145.00</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Moneyness:</span>
                                                <span class="font-semibold text-yellow-400">ATM</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Bid-Ask Spread:</span>
                                                <span class="font-mono text-green-400">$0.05</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Greeks -->
                                    <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-3">
                                        <div class="text-xs font-semibold text-gray-400 mb-2">GREEKS</div>
                                        <div class="space-y-1 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Delta:</span>
                                                <span class="font-mono font-semibold">0.52</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Gamma:</span>
                                                <span class="font-mono">0.03</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Theta:</span>
                                                <span class="font-mono text-red-400">-0.18</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Vega:</span>
                                                <span class="font-mono">0.25</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <!-- Card Actions -->
                        <div class="border-t border-[#2a2a2a] p-4 bg-[#1a1a1a] flex gap-3">
                            <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors">
                                Trade on Robinhood
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="Copy contract symbol">
                                üìã
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="View chart">
                                üìä
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="Set alert">
                                ‚è∞
                            </button>
                        </div>
                    </div>

                    <!-- SIGNAL CARD 2: MOMENTUM -->
                    <div class="signal-card bg-[#1a1a1a] border-2 border-blue-500/30 rounded-xl overflow-hidden">
                        <div class="bg-gradient-to-r from-blue-900/20 to-cyan-900/20 border-b border-[#2a2a2a] p-4">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-3xl font-extrabold">TSLA</h3>
                                        <span class="text-xl font-bold text-gray-300">$430 CALL</span>
                                        <span class="px-3 py-1 bg-blue-500 text-white text-sm font-bold rounded-full">78% Confidence</span>
                                        <span class="px-3 py-1 bg-cyan-500/20 text-cyan-300 text-xs font-semibold rounded-full border border-cyan-500/30">üöÄ MOMENTUM</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-sm text-gray-400">
                                        <span>Expires: <strong class="text-white">Dec 26, 2025</strong></span>
                                        <span>‚Ä¢</span>
                                        <span><strong class="text-yellow-400">5 DTE</strong></span>
                                        <span>‚Ä¢</span>
                                        <span class="text-xs text-gray-500">Generated 8 minutes ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-[#1f1f1f]">
                            <div class="grid grid-cols-3 gap-4 mb-6">
                                <div class="bg-blue-500/10 border-2 border-blue-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-blue-300 mb-1">ENTRY</div>
                                    <div class="text-3xl font-bold monospace text-blue-400">$8.40</div>
                                    <div class="text-xs text-gray-400 mt-1">ASK price</div>
                                </div>
                                <div class="bg-green-500/10 border-2 border-green-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-green-300 mb-1">TARGET üéØ</div>
                                    <div class="text-3xl font-bold monospace text-green-400">$11.76</div>
                                    <div class="text-sm font-semibold text-green-400 mt-1">+40%</div>
                                </div>
                                <div class="bg-red-500/10 border-2 border-red-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-red-300 mb-1">STOP üõë</div>
                                    <div class="text-3xl font-bold monospace text-red-400">$7.14</div>
                                    <div class="text-sm font-semibold text-red-400 mt-1">-15%</div>
                                </div>
                            </div>

                            <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-3 text-center mb-6">
                                <span class="text-sm text-gray-400">Risk/Reward:</span>
                                <span class="text-xl font-bold text-green-400 ml-2">2.7:1</span>
                                <span class="text-xs text-gray-500 ml-2">(Risk $126 to make $336)</span>
                            </div>

                            <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-4 mb-4">
                                <div class="text-xs font-semibold text-gray-400 mb-2">SIGNAL REASON</div>
                                <div class="text-sm font-mono text-white">
                                    <strong class="text-cyan-400">MOMENTUM:</strong>
                                    <strong class="text-green-400">3.8% breakout</strong> +
                                    MACD <strong class="text-blue-400">bullish cross</strong> +
                                    Volume <strong class="text-orange-400">2,840 contracts</strong>
                                    (<strong class="text-orange-400">4.2x avg</strong>)
                                </div>
                            </div>
                        </div>

                        <div class="border-t border-[#2a2a2a] p-4 bg-[#1a1a1a] flex gap-3">
                            <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors">
                                Trade on Robinhood
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">üìã</button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">üìä</button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">‚è∞</button>
                        </div>
                    </div>

                    <!-- SIGNAL CARD 3: Moderate Confidence -->
                    <div class="signal-card bg-[#1a1a1a] border-2 border-yellow-500/30 rounded-xl overflow-hidden">
                        <div class="bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border-b border-[#2a2a2a] p-4">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-3xl font-extrabold">META</h3>
                                        <span class="text-xl font-bold text-gray-300">$610 CALL</span>
                                        <span class="px-3 py-1 bg-yellow-500 text-black text-sm font-bold rounded-full">72% Confidence</span>
                                        <span class="px-3 py-1 bg-blue-500/20 text-blue-300 text-xs font-semibold rounded-full border border-blue-500/30">‚ö° SCALP</span>
                                    </div>
                                    <div class="flex items-center gap-2 text-sm text-gray-400">
                                        <span>Expires: <strong class="text-white">Dec 24, 2025</strong></span>
                                        <span>‚Ä¢</span>
                                        <span><strong class="text-yellow-400">3 DTE</strong></span>
                                        <span>‚Ä¢</span>
                                        <span class="text-xs text-gray-500">Generated 15 minutes ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-[#1f1f1f]">
                            <div class="grid grid-cols-3 gap-4 mb-6">
                                <div class="bg-blue-500/10 border-2 border-blue-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-blue-300 mb-1">ENTRY</div>
                                    <div class="text-3xl font-bold monospace text-blue-400">$6.80</div>
                                    <div class="text-xs text-gray-400 mt-1">ASK price</div>
                                </div>
                                <div class="bg-green-500/10 border-2 border-green-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-green-300 mb-1">TARGET üéØ</div>
                                    <div class="text-3xl font-bold monospace text-green-400">$8.16</div>
                                    <div class="text-sm font-semibold text-green-400 mt-1">+20%</div>
                                </div>
                                <div class="bg-red-500/10 border-2 border-red-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-red-300 mb-1">STOP üõë</div>
                                    <div class="text-3xl font-bold monospace text-red-400">$5.78</div>
                                    <div class="text-sm font-semibold text-red-400 mt-1">-15%</div>
                                </div>
                            </div>

                            <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-3 text-center mb-6">
                                <span class="text-sm text-gray-400">Risk/Reward:</span>
                                <span class="text-xl font-bold text-green-400 ml-2">2.0:1</span>
                                <span class="text-xs text-gray-500 ml-2">(Risk $102 to make $204)</span>
                            </div>

                            <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-4 mb-4">
                                <div class="text-xs font-semibold text-gray-400 mb-2">SIGNAL REASON</div>
                                <div class="text-sm font-mono text-white">
                                    <strong class="text-blue-400">SCALP:</strong>
                                    <strong class="text-green-400">2.9% momentum</strong> +
                                    RSI <strong class="text-yellow-400">38 oversold</strong> +
                                    Volume <strong class="text-orange-400">1,120 contracts</strong>
                                    (<strong class="text-gray-400">1.8x avg</strong>)
                                </div>
                            </div>
                        </div>

                        <div class="border-t border-[#2a2a2a] p-4 bg-[#1a1a1a] flex gap-3">
                            <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors">
                                Trade on Robinhood
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">üìã</button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">üìä</button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors">‚è∞</button>
                        </div>
                    </div>

                </div>
            </main>

            <!-- SECTION 5 & 7: Active Positions + Risk Management (Right Sidebar) -->
            <aside class="col-span-3 space-y-6">

                <!-- Risk Management Panel -->
                <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg p-6 sticky top-24">
                    <h2 class="text-lg font-bold mb-4 flex items-center gap-2">
                        üõ°Ô∏è Risk Management
                    </h2>

                    <!-- Position Limits -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-gray-400">Position Limits</span>
                            <span class="text-sm font-bold text-green-400">üü¢ 2/3 positions</span>
                        </div>
                        <div class="h-2 bg-[#0a0a0a] rounded-full overflow-hidden">
                            <div class="h-full bg-green-500" style="width: 66.6%"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">1 slot available</p>
                    </div>

                    <!-- Daily Loss Limit -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-gray-400">Daily Loss Limit</span>
                            <span class="text-sm font-bold text-green-400">-1.2% / -3.0%</span>
                        </div>
                        <div class="h-2 bg-[#0a0a0a] rounded-full overflow-hidden">
                            <div class="h-full bg-green-500" style="width: 40%"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Circuit breaker halts trading at -3.0%</p>
                    </div>

                    <!-- Account Risk Per Trade -->
                    <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-4">
                        <div class="text-xs font-semibold text-gray-400 mb-2">NEXT TRADE SIZING</div>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Account size:</span>
                                <span class="font-mono font-semibold">$10,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Risk per trade:</span>
                                <span class="font-mono font-semibold text-blue-400">2% ($200)</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Suggested size:</span>
                                <span class="font-mono font-semibold text-green-400">6 contracts</span>
                            </div>
                        </div>
                        <div class="mt-3 pt-3 border-t border-[#2a2a2a] text-xs text-gray-500">
                            Risking $200 to make $400 (2:1 R/R)
                        </div>
                    </div>
                </div>

                <!-- Active Positions Panel -->
                <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg p-6">
                    <h2 class="text-lg font-bold mb-4 flex items-center gap-2">
                        üìà Active Positions
                        <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded">2 open</span>
                    </h2>

                    <!-- Summary Stats -->
                    <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-4">
                        <div class="text-center">
                            <div class="text-xs text-green-300 mb-1">Total P/L Today</div>
                            <div class="text-3xl font-bold text-green-400">+$245</div>
                            <div class="text-sm text-green-300 mt-1">+2.1%</div>
                        </div>
                    </div>

                    <!-- Position 1 -->
                    <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-4 mb-3">
                        <div class="flex items-center justify-between mb-2">
                            <div>
                                <div class="font-bold">AAPL $200 CALL</div>
                                <div class="text-xs text-gray-400">Exp: Dec 27 ‚Ä¢ 4 DTE</div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-green-400">+$125</div>
                                <div class="text-sm text-green-300">+8.5%</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-2 text-xs mb-3">
                            <div>
                                <div class="text-gray-500">Entry</div>
                                <div class="font-mono">$4.20</div>
                            </div>
                            <div>
                                <div class="text-gray-500">Current</div>
                                <div class="font-mono text-green-400">$4.56</div>
                            </div>
                            <div>
                                <div class="text-gray-500">Target</div>
                                <div class="font-mono text-green-400">$5.04</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="flex-1 bg-red-500/20 border border-red-500/30 text-red-300 text-xs py-2 rounded hover:bg-red-500/30">
                                Close Position
                            </button>
                            <button class="px-3 bg-[#1a1a1a] border border-[#2a2a2a] text-gray-400 text-xs py-2 rounded hover:border-blue-500">
                                Adjust
                            </button>
                        </div>
                    </div>

                    <!-- Position 2 -->
                    <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <div>
                                <div class="font-bold">MSFT $420 CALL</div>
                                <div class="text-xs text-gray-400">Exp: Dec 26 ‚Ä¢ 5 DTE</div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-green-400">+$120</div>
                                <div class="text-sm text-green-300">+12.0%</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-2 text-xs mb-3">
                            <div>
                                <div class="text-gray-500">Entry</div>
                                <div class="font-mono">$3.00</div>
                            </div>
                            <div>
                                <div class="text-gray-500">Current</div>
                                <div class="font-mono text-green-400">$3.36</div>
                            </div>
                            <div>
                                <div class="text-gray-500">Target</div>
                                <div class="font-mono text-green-400">$3.75</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="flex-1 bg-red-500/20 border border-red-500/30 text-red-300 text-xs py-2 rounded hover:bg-red-500/30">
                                Close Position
                            </button>
                            <button class="px-3 bg-[#1a1a1a] border border-[#2a2a2a] text-gray-400 text-xs py-2 rounded hover:border-blue-500">
                                Adjust
                            </button>
                        </div>
                    </div>
                </div>

            </aside>
        </div>
    </div>

    <script>
        // TradeFly Dashboard - Live Data Integration
        const Dashboard = {
            signals: [],
            topMovers: [],
            marketStatus: null,
            filters: {
                strategy: '',
                confidence: 0.70,
                moneyness: 'atm',
                dte: '4-7',
                minPrice: 0.01,
                maxPrice: 10.00,
                minDelta: 0.40,
                maxDelta: 0.70
            },

            async init() {
                console.log('Dashboard initializing...');
                this.startLiveClock();
                await this.loadMarketStatus();
                await this.loadTopMovers();
                await this.loadSignals();

                // Auto-refresh every 30 seconds
                setInterval(() => this.loadSignals(), 30000);
                setInterval(() => this.loadTopMovers(), 30000);
                setInterval(() => this.loadMarketStatus(), 60000);

                this.setupEventListeners();
            },

            startLiveClock() {
                const updateClock = () => {
                    const now = new Date();
                    const etTime = now.toLocaleTimeString('en-US', {
                        timeZone: 'America/New_York',
                        hour12: true,
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    const clockEl = document.querySelector('.font-mono');
                    if (clockEl) clockEl.textContent = etTime;
                };
                setInterval(updateClock, 1000);
                updateClock();
            },

            setupEventListeners() {
                // Filter listeners
                document.querySelectorAll('select, input[type="number"]').forEach(el => {
                    el.addEventListener('change', () => this.handleFilterChange());
                });

                // Refresh button
                const refreshBtn = document.querySelector('.bg-blue-600');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', () => this.loadSignals());
                }
            },

            handleFilterChange() {
                // Update filters from UI
                this.filters.strategy = document.querySelector('select')?.value || '';
                this.filters.confidence = parseFloat(document.querySelectorAll('select')[1]?.value || 0.70);
                this.filters.moneyness = document.querySelectorAll('select')[2]?.value || '';
                this.filters.dte = document.querySelectorAll('select')[3]?.value || '';

                const inputs = document.querySelectorAll('input[type="number"]');
                this.filters.minPrice = parseFloat(inputs[0]?.value || 0.01);
                this.filters.maxPrice = parseFloat(inputs[1]?.value || 10.00);
                this.filters.minDelta = parseFloat(inputs[2]?.value || 0.40);
                this.filters.maxDelta = parseFloat(inputs[3]?.value || 0.70);

                this.loadSignals();
            },

            async loadMarketStatus() {
                try {
                    const response = await fetch('/api/market/status');
                    const data = await response.json();
                    this.marketStatus = data;
                    this.updateMarketStatusUI(data);
                } catch (error) {
                    console.error('Failed to load market status:', error);
                }
            },

            updateMarketStatusUI(data) {
                const statusBanner = document.querySelector('header .bg-gradient-to-r');
                if (!statusBanner) return;

                const isOpen = data.is_market_open || data.is_trading_hours;
                const statusHTML = isOpen ? `
                    <div class="flex items-center gap-3 bg-green-500/10 border border-green-500/30 rounded-lg px-4 py-2">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-green-500 pulse-dot"></div>
                            <span class="font-bold text-green-400">MARKET OPEN</span>
                        </div>
                        <div class="h-4 w-px bg-green-500/30"></div>
                        <span class="text-sm text-green-300">üî• MORNING MOMENTUM</span>
                    </div>
                ` : `
                    <div class="flex items-center gap-3 bg-red-500/10 border border-red-500/30 rounded-lg px-4 py-2">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500 pulse-dot"></div>
                            <span class="font-bold text-red-400">MARKET CLOSED</span>
                        </div>
                        <div class="h-4 w-px bg-red-500/30"></div>
                        <span class="text-sm text-red-300">üåô After Hours</span>
                    </div>
                `;

                const statusContainer = statusBanner.querySelector('.flex.items-center.gap-6');
                if (statusContainer) {
                    const firstDiv = statusContainer.querySelector('div');
                    if (firstDiv) {
                        firstDiv.innerHTML = statusHTML;
                    }
                }
            },

            async loadTopMovers() {
                try {
                    const response = await fetch('/api/market/top-movers');
                    const data = await response.json();
                    this.topMovers = data.movers || [];
                    this.updateTopMoversUI();
                } catch (error) {
                    console.error('Failed to load top movers:', error);
                }
            },

            updateTopMoversUI() {
                const tickerContainer = document.querySelector('.ticker-scroll');
                if (!tickerContainer || this.topMovers.length === 0) return;

                const duplicated = [...this.topMovers, ...this.topMovers];
                const html = duplicated.map(mover => {
                    const isGainer = mover.change_percent >= 0;
                    const borderColor = isGainer ? 'border-green-500/20' : 'border-red-500/20';
                    const textColor = isGainer ? 'text-green-400' : 'text-red-400';
                    const volumeBadge = (mover.volume_ratio || 1) >= 3 ? '<span class="text-xs text-orange-400">üî• ' + (mover.volume_ratio || 1).toFixed(1) + 'x vol</span>' : '<span class="text-xs text-gray-500">' + (mover.volume_ratio || 1).toFixed(1) + 'x vol</span>';

                    return `
                        <div class="bg-[#1f1f1f] border ${borderColor} rounded-lg px-4 py-2 flex items-center gap-3">
                            <span class="font-bold text-lg">${mover.symbol}</span>
                            <span class="font-mono text-sm">$${mover.price.toFixed(2)}</span>
                            <span class="font-bold ${textColor} text-sm">${isGainer ? '+' : ''}${mover.change_percent.toFixed(1)}%</span>
                            ${volumeBadge}
                        </div>
                    `;
                }).join('');

                tickerContainer.innerHTML = `<div class="flex gap-6">${html}</div><div class="flex gap-6">${html}</div>`;
            },

            async loadSignals() {
                try {
                    const container = document.querySelector('main .space-y-4');
                    if (!container) return;

                    // Show loading state
                    container.innerHTML = '<div class="text-center py-12 text-gray-400">Loading signals...</div>';

                    const params = new URLSearchParams();
                    if (this.filters.strategy) params.append('strategy', this.filters.strategy);
                    params.append('min_confidence', this.filters.confidence);
                    params.append('max_price', this.filters.maxPrice);
                    params.append('max_results', '20');

                    const response = await fetch(`/api/options/signals?${params}`);
                    const data = await response.json();
                    this.signals = Array.isArray(data) ? data : [];

                    this.filterAndRenderSignals();
                } catch (error) {
                    console.error('Failed to load signals:', error);
                    this.showError();
                }
            },

            filterAndRenderSignals() {
                let filtered = [...this.signals];

                // Apply client-side filters
                if (this.filters.moneyness) {
                    filtered = filtered.filter(s => this.calculateMoneyness(s) === this.filters.moneyness);
                }

                if (this.filters.dte) {
                    filtered = filtered.filter(s => {
                        const dte = s.contract.days_to_expiry;
                        const [min, max] = this.filters.dte === '90+' ? [90, 999] : this.filters.dte.split('-').map(Number);
                        return dte >= min && (max === undefined || dte <= max);
                    });
                }

                filtered = filtered.filter(s => {
                    const delta = Math.abs(s.contract.greeks.delta);
                    return s.entry_price >= this.filters.minPrice &&
                           s.entry_price <= this.filters.maxPrice &&
                           delta >= this.filters.minDelta &&
                           delta <= this.filters.maxDelta;
                });

                this.renderSignals(filtered);
            },

            calculateMoneyness(signal) {
                const { underlying_price, strike } = signal.contract;
                const isCall = signal.action.includes('CALL');
                const pctDiff = ((underlying_price - strike) / strike) * 100;

                if (isCall) {
                    if (pctDiff > 10) return 'deep-itm';
                    if (pctDiff > 2) return 'itm';
                    if (pctDiff > -2 && pctDiff <= 2) return 'atm';
                    if (pctDiff > -10) return 'otm';
                    return 'far-otm';
                } else {
                    if (pctDiff < -10) return 'deep-itm';
                    if (pctDiff < -2) return 'itm';
                    if (pctDiff >= -2 && pctDiff < 2) return 'atm';
                    if (pctDiff < 10) return 'otm';
                    return 'far-otm';
                }
            },

            renderSignals(signals) {
                const container = document.querySelector('main .space-y-4');
                if (!container) return;

                // Update result count
                const resultSummary = document.querySelector('main h2 + p');
                if (resultSummary) {
                    resultSummary.textContent = `Found ${signals.length} signals matching your criteria`;
                }

                if (signals.length === 0) {
                    container.innerHTML = `
                        <div class="bg-[#1a1a1a] border-2 border-yellow-500/30 rounded-xl p-12 text-center">
                            <div class="text-6xl mb-4">üìä</div>
                            <h3 class="text-2xl font-bold mb-2">No Signals Found</h3>
                            <p class="text-gray-400 mb-4">Current filters are very strict. Try:</p>
                            <ul class="text-sm text-gray-500 mb-6 space-y-1">
                                <li>‚Ä¢ Lower confidence threshold</li>
                                <li>‚Ä¢ Wider price range</li>
                                <li>‚Ä¢ More expiration dates</li>
                            </ul>
                            <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                    onclick="Dashboard.loadSignals()">
                                üîÑ Refresh Signals
                            </button>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = signals.map(signal => this.renderSignalCard(signal)).join('');
            },

            renderSignalCard(signal) {
                const { contract } = signal;
                const isCall = signal.action.includes('CALL');
                const confidence = (signal.confidence * 100).toFixed(0);

                // Confidence color coding
                let confColor = 'yellow';
                let confBg = 'bg-yellow-500';
                let confText = 'text-black';
                if (confidence >= 85) { confColor = 'purple'; confBg = 'bg-purple-500'; confText = 'text-white'; }
                else if (confidence >= 78) { confColor = 'blue'; confBg = 'bg-blue-500'; confText = 'text-white'; }

                // Calculate R/R ratio
                const risk = signal.entry_price - signal.stop_loss;
                const reward = signal.target_price - signal.entry_price;
                const rrRatio = (reward / risk).toFixed(1);

                // Strategy badge
                const strategyBadge = this.getStrategyBadge(signal.strategy);

                // Check if signal is recent (< 5 min)
                const isHot = true; // Could check timestamp if available

                return `
                    <div class="signal-card bg-[#1a1a1a] border-2 border-${confColor}-500/30 rounded-xl overflow-hidden">
                        <div class="bg-gradient-to-r from-${confColor}-900/20 to-blue-900/20 border-b border-[#2a2a2a] p-4">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-3xl font-extrabold">${contract.symbol}</h3>
                                        <span class="text-xl font-bold text-gray-300">$${contract.strike} ${isCall ? 'CALL' : 'PUT'}</span>
                                        <span class="px-3 py-1 ${confBg} ${confText} text-sm font-bold rounded-full">${confidence}% Confidence</span>
                                        ${strategyBadge}
                                        ${isHot ? '<span class="px-2 py-1 bg-orange-500/20 text-orange-300 text-xs font-semibold rounded border border-orange-500/30">üî• HOT</span>' : ''}
                                    </div>
                                    <div class="flex items-center gap-2 text-sm text-gray-400">
                                        <span>Expires: <strong class="text-white">${contract.expiration}</strong></span>
                                        <span>‚Ä¢</span>
                                        <span><strong class="text-yellow-400">${contract.days_to_expiry} DTE</strong></span>
                                        <span>‚Ä¢</span>
                                        <span class="text-xs text-gray-500">Generated just now</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-[#1f1f1f]">
                            <div class="grid grid-cols-3 gap-4 mb-6">
                                <div class="bg-blue-500/10 border-2 border-blue-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-blue-300 mb-1">ENTRY</div>
                                    <div class="text-3xl font-bold monospace text-blue-400">$${signal.entry_price.toFixed(2)}</div>
                                    <div class="text-xs text-gray-400 mt-1">ASK price</div>
                                </div>

                                <div class="bg-green-500/10 border-2 border-green-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-green-300 mb-1">TARGET üéØ</div>
                                    <div class="text-3xl font-bold monospace text-green-400">$${signal.target_price.toFixed(2)}</div>
                                    <div class="text-sm font-semibold text-green-400 mt-1">+${(((signal.target_price - signal.entry_price) / signal.entry_price) * 100).toFixed(0)}%</div>
                                </div>

                                <div class="bg-red-500/10 border-2 border-red-500 rounded-lg p-4 text-center">
                                    <div class="text-xs font-semibold text-red-300 mb-1">STOP üõë</div>
                                    <div class="text-3xl font-bold monospace text-red-400">$${signal.stop_loss.toFixed(2)}</div>
                                    <div class="text-sm font-semibold text-red-400 mt-1">-${(((signal.entry_price - signal.stop_loss) / signal.entry_price) * 100).toFixed(0)}%</div>
                                </div>
                            </div>

                            <div class="bg-[#0a0a0a] border border-green-500/30 rounded-lg p-3 text-center mb-6">
                                <span class="text-sm text-gray-400">Risk/Reward:</span>
                                <span class="text-xl font-bold text-green-400 ml-2">${rrRatio}:1</span>
                                <span class="text-xs text-gray-500 ml-2">(Risk $${(risk * 100).toFixed(0)} to make $${(reward * 100).toFixed(0)})</span>
                            </div>

                            <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-4 mb-4">
                                <div class="text-xs font-semibold text-gray-400 mb-2">SIGNAL REASON</div>
                                <div class="text-sm font-mono text-white">
                                    ${signal.reason || 'Live trading signal based on production filters'}
                                </div>
                            </div>

                            <details class="group">
                                <summary class="cursor-pointer text-sm font-semibold text-blue-400 hover:text-blue-300 mb-2">
                                    Show Full Details ‚ñº
                                </summary>

                                <div class="grid grid-cols-2 gap-4 mt-4">
                                    <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-3">
                                        <div class="text-xs font-semibold text-gray-400 mb-2">CONTRACT DETAILS</div>
                                        <div class="space-y-1 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Underlying:</span>
                                                <span class="font-mono font-semibold">$${contract.underlying_price.toFixed(2)}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Strike:</span>
                                                <span class="font-mono font-semibold">$${contract.strike.toFixed(2)}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Moneyness:</span>
                                                <span class="font-semibold text-yellow-400">${this.getMoneynessLabel(this.calculateMoneyness(signal))}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Volume:</span>
                                                <span class="font-mono text-green-400">${contract.volume || 'N/A'}</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg p-3">
                                        <div class="text-xs font-semibold text-gray-400 mb-2">GREEKS</div>
                                        <div class="space-y-1 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Delta:</span>
                                                <span class="font-mono font-semibold">${contract.greeks.delta.toFixed(2)}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Gamma:</span>
                                                <span class="font-mono">${(contract.greeks.gamma || 0).toFixed(3)}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Theta:</span>
                                                <span class="font-mono text-red-400">${(contract.greeks.theta || 0).toFixed(2)}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-400">Vega:</span>
                                                <span class="font-mono">${(contract.greeks.vega || 0).toFixed(2)}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <div class="border-t border-[#2a2a2a] p-4 bg-[#1a1a1a] flex gap-3">
                            <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors">
                                Trade on Robinhood
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="Copy contract symbol">
                                üìã
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="View chart">
                                üìä
                            </button>
                            <button class="px-4 bg-[#0a0a0a] border border-[#2a2a2a] hover:border-blue-500 rounded-lg transition-colors" title="Set alert">
                                ‚è∞
                            </button>
                        </div>
                    </div>
                `;
            },

            getStrategyBadge(strategy) {
                const badges = {
                    'SCALP': '<span class="px-3 py-1 bg-blue-500/20 text-blue-300 text-xs font-semibold rounded-full border border-blue-500/30">‚ö° SCALP</span>',
                    'MOMENTUM': '<span class="px-3 py-1 bg-cyan-500/20 text-cyan-300 text-xs font-semibold rounded-full border border-cyan-500/30">üöÄ MOMENTUM</span>',
                    'VOLUME_SPIKE': '<span class="px-3 py-1 bg-purple-500/20 text-purple-300 text-xs font-semibold rounded-full border border-purple-500/30">üìä VOLUME SPIKE</span>'
                };
                return badges[strategy] || badges['SCALP'];
            },

            getMoneynessLabel(moneyness) {
                const labels = {
                    'deep-itm': 'Deep ITM',
                    'itm': 'ITM',
                    'atm': 'ATM',
                    'otm': 'OTM',
                    'far-otm': 'Far OTM'
                };
                return labels[moneyness] || 'ATM';
            },

            showError() {
                const container = document.querySelector('main .space-y-4');
                if (!container) return;

                container.innerHTML = `
                    <div class="bg-[#1a1a1a] border-2 border-red-500/30 rounded-xl p-12 text-center">
                        <div class="text-6xl mb-4">‚ö†Ô∏è</div>
                        <h3 class="text-2xl font-bold text-red-400 mb-2">Unable to Load Signals</h3>
                        <p class="text-gray-400 mb-6">API connection failed. Please check your connection and try again.</p>
                        <button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
                                onclick="Dashboard.loadSignals()">
                            üîÑ Retry
                        </button>
                    </div>
                `;
            }
        };

        // Initialize dashboard on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => Dashboard.init());
        } else {
            Dashboard.init();
        }
    </script>

</body>
</html>
